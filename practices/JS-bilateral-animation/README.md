# jQuery bilateral animation

**Could be upgraded; WIP**

В примере ([example.js](./example.js)) показан принцип использования jQuery аниманиции для элементов, имеющих 2 стадии анимирования (вперед-назад). Отлично подойдет для появления / закрытия всплывающих окон, etc.

- Требуется jQuery.
- Использует классы для определения направления анимации.

Использован в проекте [sahalin](https://github.com/ned4ded/sahalin/blob/master/src/scripts/canvas-save.animation.js);


## Usage
Пример вызова функции:
``` javascript
  $( btnForward ).click(() => animate(animatingElement, {
    forward: {
      before: () => (),
      after: () => (),
    },
    reverse: {
      before: () => (),
      after: () => (),
    }
  }));
```
Пример использования функции в определенном контексте (процесс анимации занавеса для интерактивного экрана и появление всплывающего окна, а так же их последующее закрытие (обратная анимация). Функции `animateCurtain` и `showPopup` работают по описанному принципу).

``` javascript
  $( btnSave ).click( () => animateCurtain(frameCurtainElement, {
    forward: {
      before: () => disableSaveBtn(btnSave),
      after: [() => showPopup(popupElement), handlers.save, handlers.clearHistory],
    }
  }));

  $( btnPopupClose ).click( () => showPopup(popupElement, {
    reverse: {
      after: () => animateCurtain(frameCurtainElement, {
        reverse: {
          after: [handlers.clear, () => enableSaveBtn(btnSave)],
        }
      }),
    }
  }));
```

Типичный процесс будет выполнен в следующей последовательности:

1. Развешивается прослушка на кнопи `btnSave`, `btnPopupClose`, которые запускают анимацию в разных направлениях.
2. По нажатию на кнопку `btnSave` выполняется колббек `disableSaveBtn()`, предотвращающий возможные проблемы, которые возникнут при вопторном запуске.
3. Закрывается шторка на интерактивном экране.
4. Запускается массив колбеков по очереди: анимация всплывающего окна, сохранение интерактивного экрана, очистка истории интерактивного экрана.
5. По нажатию на кнопку `btnPopupClose` запускается анимация закрытия всплывающего окна;
6. После закрытия всплывающего окна отрабатывает второй колбек на анимацию закрытия шторки.
7. Полсе закрытия шторки очищается интерактивный экран и разблокируется кнопка сохранения.

Можно добавить любое количество коллбеков для использования на 4х возможных этапах анимирования.  

## TODO

- [ ] Добавить возможность запрета запуска новой анимации, пока старая еще не завершина или добавить прерывание;
- [ ] Сделать классом;
- [ ] Убрать jQuery;
- [ ] Заменить использование класса на внутренние переменные или data-аттрибуты;
